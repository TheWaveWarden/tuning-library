# Build dexed with JUCE buidls

trigger:
- master

pr:
- master

jobs:

- job: Build
  strategy:
    matrix:
      mac:
        imageName: 'macos-10.14'
        isMac: True
      win:
        imageName: 'vs2017-win2016'
        isWindows: True
      lin:
        imageName: 'ubuntu-18.04'
        isLinux: True

  pool:
    vmImage: $(imageName)

  steps:
  - checkout: self
    fetchDepth: 1
    # submodules: recursive # can't do submodules here b'cuz depth=1 fails with Github

  - bash: |
      make all
    displayName: Build with make

  - bash: |
      make runtests
    displayName: Run tests with make

